LLM Analysis of MCAS diagnostic criteria
================

- [Converting LLM diagnoses to ICD codes using
  embeddings](#converting-llm-diagnoses-to-icd-codes-using-embeddings)

# Converting LLM diagnoses to ICD codes using embeddings

- `/scripts/embeddings/diagnosis_chatgpt_embeddings_to_ICD.R`
  - Inputs
    - `data/chatgpt_embeddings/icd10_chatgpt_embedding_pca.RDS` - PCA
      reduction of ICD10 embeddings from
    - `data/chatgpt_embeddings/icd10_chatgpt_embeddings.csv.gz` -
      ChatGPT embeddings of ICD10 codes
    - `data/chatgpt_embeddings/diagnosis_chatgpt_embeddings_text-embedding-3-small.csv` -
      ChatGPT embeddings of diagnoses generated by ChatGPT
  - Steps
    - Joins ICD10 emebeddings, diagnoses, and codes with the PCA
      reduction
    - Reduces ChatGPT diagnosis ChatGPT embeddings into same PCA space
      as the ICD10 code reduction
    - Finds nearest ICD10 PCA coordinate to each ChatGPT diagnosis PCA
      coordinate
    - Creates a key linking each ChatGPT diagnosis with its nearest
      neighbor in the ICD10 ChatGPT embedding PCA space
  - Output
    - `data/chatgpt_embeddings/diagnosis_chatgpt_embeddings_to_ICD.csv`
